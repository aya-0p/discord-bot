# 細かい仕様
## 基本
- `/ay setting`,`/ay read`,`/ay reply`はサーバー別で保存しています。
- Botの最終更新は5秒おきに更新しています。
## ボイスチャンネルへの接続および切断
- 実行者がボイスチャンネルに接続しているときのみ参加するので、実行者はボイスチャンネルに接続しましょう。
- 同一サーバー内では1か所しか参加できません。また、同一サーバー内で別のボイスチャンネルに移動するときは一度`/ay disconnect`をしないといけません
- ボイスチャンネルの参加者がBot以外いなくなった時は自動的に退出します。しかし、時間経過では退出しないので`/ay disconnect`を使いましょう。なお、入れっぱなしでもPCへの影響はないのでそのままでもいいです。
- 権限がある人がBotをDiscordの機能で落としてもBotが戻ってくることがありますが仕様です。
## 読み上げと読み替え
- Botのメッセージと「;」「//」「!」「?」から始まるメッセージ、「||このメッセージは読まない||」など縦棒で囲まれた、伏字部分は読みません。
- そのためBotの自動返信は読みません。**なお、今後変更する可能性はあります。**
- さらに、ひらがな、カタカナ、漢字、アルファベット、数字以外も読みません。細かくは次の通り
- これに当てはまると読みません。`/[^\p{Script_Extensions=Han}\p{Script_Extensions=Hira}\p{Script_Extensions=Kana}a-zA-Z0-9０-９～ａ-ｚＡ-Ｚ]+/`
- 読み上げ能力向上のため、次の日本語単語リストを利用しています。`https://github.com/masayu-a/WLSP`(https://creativecommons.org/licenses/by-nc-sa/3.0/deed.ja)
- 読み上げは非対応の文字および「、」「。」改行で分割して生成しています。句読点と改行をうまく使うと早く読み上げてくれます。
- 一度読み上げた文章は保存され、2回目以降はこれを使うようにしています。名前の読み上げが速いのはそのためです。
- ほとんどの英語はちゃんと読んでくれません。`/ay read`を使ってください。
- 初期で「w(回数無制限)→わら」などの読み替えを追加しています。wの入った読み替えは笑います。
